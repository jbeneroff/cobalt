{
  "version": 3,
  "sources": [
    "../src/index.tsx"
  ],
  "names": [
    "getTargetRect",
    "target",
    "window",
    "getBoundingClientRect",
    "top",
    "left",
    "bottom",
    "getOffset",
    "element",
    "elemRect",
    "targetRect",
    "scrollTop",
    "scrollLeft",
    "docElem",
    "document",
    "body",
    "clientTop",
    "clientLeft",
    "width",
    "height",
    "getDefaultTarget",
    "Affix",
    "props",
    "placeholderStyle",
    "undefined",
    "affixStyle",
    "node",
    "box",
    "updatePosition",
    "bind",
    "timeout",
    "setTimeout",
    "setTargetEventListeners",
    "clearEventListeners",
    "clearTimeout",
    "offsetTop",
    "offsetBottom",
    "offsetParent",
    "elemSize",
    "clientWidth",
    "clientHeight",
    "offsetMode",
    "elemOffset",
    "documentElement",
    "y",
    "setPlaceholderStyle",
    "setAffixStyle",
    "position",
    "onChange",
    "affixed",
    "state",
    "setState",
    "events",
    "forEach",
    "eventName",
    "eventHandlers",
    "addEventListener",
    "handler",
    "removeEventListener",
    "prefixCls",
    "className",
    "children",
    "resetProps",
    "cls",
    "filter",
    "Boolean",
    "join",
    "trim",
    "getInstance",
    "style",
    "React",
    "Component",
    "noop"
  ],
  "mappings": "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",
  "sourcesContent": [
    "import React from 'react';\nimport { IProps, HTMLDivProps, getScroll, noop } from '@uiw/utils';\n\nexport interface AffixProps extends IProps, Omit<HTMLDivProps, 'onChange'> {\n  /**\n   * 距离窗口顶部达到指定偏移量后触发\n   */\n  offsetTop?: number;\n  /**\n   * 距离窗口底部达到指定偏移量后触发\n   */\n  offsetBottom?: number;\n  target?: () => Window | HTMLElement | null;\n  /**\n   * 固定状态改变时触发的回调函数\n   */\n  onChange?: (affixed?: boolean) => void;\n}\n\nexport interface IAffixState {\n  affixStyle?: React.CSSProperties;\n  placeholderStyle?: React.CSSProperties;\n}\n\nfunction getTargetRect(target: HTMLElement | Window | null): ClientRect {\n  return target !== window\n    ? (target as HTMLElement).getBoundingClientRect()\n    : ({ top: 0, left: 0, bottom: 0 } as ClientRect);\n}\n\nfunction getOffset(element: HTMLElement, target: HTMLElement | Window | null) {\n  const elemRect = element.getBoundingClientRect();\n  const targetRect = getTargetRect(target);\n  const scrollTop = getScroll(target, true);\n  const scrollLeft = getScroll(target);\n\n  const docElem = window.document.body;\n  const clientTop = docElem.clientTop || 0;\n  const clientLeft = docElem.clientLeft || 0;\n\n  return {\n    top: elemRect.top - targetRect.top + scrollTop - clientTop,\n    left: elemRect.left - targetRect.left + scrollLeft - clientLeft,\n    width: elemRect.width,\n    height: elemRect.height,\n  };\n}\n\nfunction getDefaultTarget() {\n  return typeof window !== 'undefined' ? window : null;\n}\n\nexport default class Affix extends React.Component<AffixProps, IAffixState> {\n  public static defaultProps: AffixProps = {\n    prefixCls: 'w-affix',\n    onChange: noop,\n  };\n  public state: IAffixState = {\n    placeholderStyle: undefined,\n    affixStyle: undefined,\n  };\n  private box: any;\n  private target!: Window | HTMLElement | null;\n  private readonly events = [\n    'resize',\n    'scroll',\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'pageshow',\n    'load',\n  ];\n  private eventHandlers: Record<string, any> = {};\n  private timeout?: number;\n  constructor(props: AffixProps & HTMLDivProps) {\n    super(props);\n    this.updatePosition = this.updatePosition.bind(this);\n  }\n  componentDidMount() {\n    const target = this.props.target || getDefaultTarget;\n    // Wait for parent component ref has its value\n    this.timeout = window.setTimeout(() => {\n      this.target = target();\n      this.setTargetEventListeners();\n    });\n  }\n  componentWillUnmount() {\n    this.clearEventListeners();\n    clearTimeout(this.timeout);\n  }\n  updatePosition() {\n    let { offsetTop } = this.props;\n    const { offsetBottom } = this.props;\n    if (!this.box || !this.box.offsetParent) {\n      return;\n    }\n    const elemSize = {\n      width: this.box.clientWidth,\n      height: this.box.clientHeight,\n    };\n    const offsetMode = { top: false, bottom: false };\n    if (typeof offsetTop !== 'number' && typeof offsetBottom !== 'number') {\n      offsetMode.top = true;\n      offsetTop = 0;\n    } else {\n      offsetMode.top = typeof offsetTop === 'number';\n      offsetMode.bottom = typeof offsetBottom === 'number';\n    }\n    const elemOffset = getOffset(this.box, this.target);\n    const box = this.box.getBoundingClientRect();\n    const bottom =\n      document.documentElement.clientHeight - box.y - elemOffset.height;\n    if (offsetMode.top && box.y < 0) {\n      this.setPlaceholderStyle({ ...elemSize });\n      this.setAffixStyle({\n        position: 'fixed',\n        top: offsetTop || 0,\n        left: elemOffset.left,\n        width: elemOffset.width,\n      });\n    } else if (bottom < 0) {\n      this.setPlaceholderStyle({ ...elemSize });\n      this.setAffixStyle({\n        position: 'fixed',\n        bottom: offsetBottom || 0,\n        left: elemOffset.left,\n        width: elemOffset.width,\n      });\n    } else {\n      this.setPlaceholderStyle();\n      this.setAffixStyle();\n    }\n  }\n  setAffixStyle(affixStyle?: React.CSSProperties) {\n    const { onChange } = this.props;\n    const affixed = !!this.state.affixStyle;\n    this.setState({ affixStyle }, () => {\n      onChange && onChange(affixed);\n    });\n  }\n  setPlaceholderStyle(placeholderStyle?: React.CSSProperties) {\n    this.setState({ placeholderStyle });\n  }\n  // 设置监听事件\n  setTargetEventListeners() {\n    this.clearEventListeners();\n    this.events.forEach((eventName) => {\n      this.eventHandlers[eventName] = this.updatePosition;\n      this.target &&\n        this.target.addEventListener(eventName, this.updatePosition, false);\n    });\n  }\n  clearEventListeners() {\n    this.events.forEach((eventName) => {\n      const handler = this.eventHandlers[eventName];\n      this.target && this.target.removeEventListener(eventName, handler, false);\n    });\n  }\n  getInstance = (node: HTMLDivElement) => {\n    if (node) {\n      this.box = node;\n    }\n  };\n  public render() {\n    const {\n      prefixCls,\n      className,\n      children,\n      offsetTop,\n      offsetBottom,\n      target,\n      onChange,\n      ...resetProps\n    } = this.props;\n    const cls = [className, prefixCls].filter(Boolean).join(' ').trim();\n    return (\n      <div\n        {...resetProps}\n        ref={this.getInstance}\n        style={{ ...this.state.placeholderStyle, ...this.props.style }}\n      >\n        <div className={cls} style={this.state.affixStyle}>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n"
  ]
}