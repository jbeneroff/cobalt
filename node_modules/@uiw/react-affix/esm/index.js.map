{
  "version": 3,
  "sources": [
    "../src/index.tsx"
  ],
  "names": [
    "React",
    "getScroll",
    "noop",
    "getTargetRect",
    "target",
    "window",
    "getBoundingClientRect",
    "top",
    "left",
    "bottom",
    "getOffset",
    "element",
    "elemRect",
    "targetRect",
    "scrollTop",
    "scrollLeft",
    "docElem",
    "document",
    "body",
    "clientTop",
    "clientLeft",
    "width",
    "height",
    "getDefaultTarget",
    "Affix",
    "Component",
    "constructor",
    "props",
    "state",
    "placeholderStyle",
    "undefined",
    "affixStyle",
    "box",
    "events",
    "eventHandlers",
    "timeout",
    "getInstance",
    "node",
    "updatePosition",
    "bind",
    "componentDidMount",
    "setTimeout",
    "setTargetEventListeners",
    "componentWillUnmount",
    "clearEventListeners",
    "clearTimeout",
    "offsetTop",
    "offsetBottom",
    "offsetParent",
    "elemSize",
    "clientWidth",
    "clientHeight",
    "offsetMode",
    "elemOffset",
    "documentElement",
    "y",
    "setPlaceholderStyle",
    "setAffixStyle",
    "position",
    "onChange",
    "affixed",
    "setState",
    "forEach",
    "eventName",
    "addEventListener",
    "handler",
    "removeEventListener",
    "render",
    "prefixCls",
    "className",
    "children",
    "resetProps",
    "cls",
    "filter",
    "Boolean",
    "join",
    "trim",
    "style",
    "defaultProps"
  ],
  "mappings": "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",
  "sourcesContent": [
    "import React from 'react';\nimport { IProps, HTMLDivProps, getScroll, noop } from '@uiw/utils';\n\nexport interface AffixProps extends IProps, Omit<HTMLDivProps, 'onChange'> {\n  /**\n   * 距离窗口顶部达到指定偏移量后触发\n   */\n  offsetTop?: number;\n  /**\n   * 距离窗口底部达到指定偏移量后触发\n   */\n  offsetBottom?: number;\n  target?: () => Window | HTMLElement | null;\n  /**\n   * 固定状态改变时触发的回调函数\n   */\n  onChange?: (affixed?: boolean) => void;\n}\n\nexport interface IAffixState {\n  affixStyle?: React.CSSProperties;\n  placeholderStyle?: React.CSSProperties;\n}\n\nfunction getTargetRect(target: HTMLElement | Window | null): ClientRect {\n  return target !== window\n    ? (target as HTMLElement).getBoundingClientRect()\n    : ({ top: 0, left: 0, bottom: 0 } as ClientRect);\n}\n\nfunction getOffset(element: HTMLElement, target: HTMLElement | Window | null) {\n  const elemRect = element.getBoundingClientRect();\n  const targetRect = getTargetRect(target);\n  const scrollTop = getScroll(target, true);\n  const scrollLeft = getScroll(target);\n\n  const docElem = window.document.body;\n  const clientTop = docElem.clientTop || 0;\n  const clientLeft = docElem.clientLeft || 0;\n\n  return {\n    top: elemRect.top - targetRect.top + scrollTop - clientTop,\n    left: elemRect.left - targetRect.left + scrollLeft - clientLeft,\n    width: elemRect.width,\n    height: elemRect.height,\n  };\n}\n\nfunction getDefaultTarget() {\n  return typeof window !== 'undefined' ? window : null;\n}\n\nexport default class Affix extends React.Component<AffixProps, IAffixState> {\n  public static defaultProps: AffixProps = {\n    prefixCls: 'w-affix',\n    onChange: noop,\n  };\n  public state: IAffixState = {\n    placeholderStyle: undefined,\n    affixStyle: undefined,\n  };\n  private box: any;\n  private target!: Window | HTMLElement | null;\n  private readonly events = [\n    'resize',\n    'scroll',\n    'touchstart',\n    'touchmove',\n    'touchend',\n    'pageshow',\n    'load',\n  ];\n  private eventHandlers: Record<string, any> = {};\n  private timeout?: number;\n  constructor(props: AffixProps & HTMLDivProps) {\n    super(props);\n    this.updatePosition = this.updatePosition.bind(this);\n  }\n  componentDidMount() {\n    const target = this.props.target || getDefaultTarget;\n    // Wait for parent component ref has its value\n    this.timeout = window.setTimeout(() => {\n      this.target = target();\n      this.setTargetEventListeners();\n    });\n  }\n  componentWillUnmount() {\n    this.clearEventListeners();\n    clearTimeout(this.timeout);\n  }\n  updatePosition() {\n    let { offsetTop } = this.props;\n    const { offsetBottom } = this.props;\n    if (!this.box || !this.box.offsetParent) {\n      return;\n    }\n    const elemSize = {\n      width: this.box.clientWidth,\n      height: this.box.clientHeight,\n    };\n    const offsetMode = { top: false, bottom: false };\n    if (typeof offsetTop !== 'number' && typeof offsetBottom !== 'number') {\n      offsetMode.top = true;\n      offsetTop = 0;\n    } else {\n      offsetMode.top = typeof offsetTop === 'number';\n      offsetMode.bottom = typeof offsetBottom === 'number';\n    }\n    const elemOffset = getOffset(this.box, this.target);\n    const box = this.box.getBoundingClientRect();\n    const bottom =\n      document.documentElement.clientHeight - box.y - elemOffset.height;\n    if (offsetMode.top && box.y < 0) {\n      this.setPlaceholderStyle({ ...elemSize });\n      this.setAffixStyle({\n        position: 'fixed',\n        top: offsetTop || 0,\n        left: elemOffset.left,\n        width: elemOffset.width,\n      });\n    } else if (bottom < 0) {\n      this.setPlaceholderStyle({ ...elemSize });\n      this.setAffixStyle({\n        position: 'fixed',\n        bottom: offsetBottom || 0,\n        left: elemOffset.left,\n        width: elemOffset.width,\n      });\n    } else {\n      this.setPlaceholderStyle();\n      this.setAffixStyle();\n    }\n  }\n  setAffixStyle(affixStyle?: React.CSSProperties) {\n    const { onChange } = this.props;\n    const affixed = !!this.state.affixStyle;\n    this.setState({ affixStyle }, () => {\n      onChange && onChange(affixed);\n    });\n  }\n  setPlaceholderStyle(placeholderStyle?: React.CSSProperties) {\n    this.setState({ placeholderStyle });\n  }\n  // 设置监听事件\n  setTargetEventListeners() {\n    this.clearEventListeners();\n    this.events.forEach((eventName) => {\n      this.eventHandlers[eventName] = this.updatePosition;\n      this.target &&\n        this.target.addEventListener(eventName, this.updatePosition, false);\n    });\n  }\n  clearEventListeners() {\n    this.events.forEach((eventName) => {\n      const handler = this.eventHandlers[eventName];\n      this.target && this.target.removeEventListener(eventName, handler, false);\n    });\n  }\n  getInstance = (node: HTMLDivElement) => {\n    if (node) {\n      this.box = node;\n    }\n  };\n  public render() {\n    const {\n      prefixCls,\n      className,\n      children,\n      offsetTop,\n      offsetBottom,\n      target,\n      onChange,\n      ...resetProps\n    } = this.props;\n    const cls = [className, prefixCls].filter(Boolean).join(' ').trim();\n    return (\n      <div\n        {...resetProps}\n        ref={this.getInstance}\n        style={{ ...this.state.placeholderStyle, ...this.props.style }}\n      >\n        <div className={cls} style={this.state.affixStyle}>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n"
  ]
}