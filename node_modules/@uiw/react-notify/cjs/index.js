"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault")["default"];

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _react = _interopRequireDefault(require("react"));

var _reactDom = _interopRequireDefault(require("react-dom"));

var _utils = require("@uiw/utils");

var _Container = _interopRequireDefault(require("./Container"));

var _jsxRuntime = require("react/jsx-runtime");

var notifys = {};
var notifysDom = {};

function NotificationCreate(props) {
  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'open';

  if (!props.placement) {
    props.placement = 'topRight';
  }

  props.type = type;

  if (!props.icon && props.icon !== null) {
    switch (props.type) {
      case 'success':
        props.icon = 'circle-check';
        break;

      case 'warning':
        props.icon = 'warning';
        break;

      case 'info':
        props.icon = 'information';
        break;

      case 'error':
        props.icon = 'circle-close';
        break;

      default:
        break;
    }
  }

  switch (props.type) {
    case 'info':
      props.type = 'primary';
      break;

    case 'error':
      props.type = 'danger';
      break;

    default:
      break;
  }

  if (props.placement && !notifys[props.placement]) {
    var div = document.createElement('div');
    document.body.appendChild(div);
    div.className = ['w-notify-warpper', props.placement].filter(Boolean).join(' ').trim();
    notifysDom[props.placement] = div;
    notifys[props.placement] = _reactDom["default"].render( /*#__PURE__*/(0, _jsxRuntime.jsx)(_Container["default"], {}), div);
  }

  if (props.duration !== null) {
    props.duration = (props.duration || 4.5) * 1000;
  }

  if (notifys[props.placement]) {
    notifys[props.placement].create((0, _objectSpread2["default"])((0, _objectSpread2["default"])({}, props), {}, {
      duration: props.duration,
      key: (0, _utils.randomid)(),
      willUnmount: function willUnmount(nprops, notifysChild) {
        if (!nprops) return;
        nprops.onClose && nprops.onClose();
        var keys = Object.keys(notifysChild[props.placement]);

        if (keys.length === 0 && notifys[props.placement]) {
          delete notifys[props.placement];

          if (notifysDom[props.placement]) {
            document.body.removeChild(notifysDom[props.placement]);
          }
        }
      }
    }));
  }
}

['open', 'success', 'warning', 'info', 'error'].forEach(function (type) {
  NotificationCreate[type] = function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    return NotificationCreate(options, type);
  };
});
var _default = NotificationCreate;
exports["default"] = _default;
module.exports = exports.default;
//# sourceMappingURL=index.js.map